"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[122],{122:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var a=n(433),r=n(439),c=n(689),o=n(87),u=n(791),s=n(861),i=n(757),l=n.n(i),p=n(243);function f(){return(f=(0,s.Z)(l().mark((function e(t){var n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"510d6b02ed225a51e009d13f1b3c4d4c",n=new URLSearchParams({api_key:"510d6b02ed225a51e009d13f1b3c4d4c",language:"en-US"}),a={headers:{accept:"application/json"}},e.next=5,p.Z.get("https://api.themoviedb.org/".concat(t,"&").concat(n),a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(e){return f.apply(this,arguments)},d="SearchMoviePage_form__sxhHj",m="SearchMoviePage_button__Kiefa",_="SearchMoviePage_input__s-aLp",g="SearchMoviePage_loadMoreButton__NTZ89",v=n(184),b=function(){var e,t=(0,c.TH)(),n=(0,u.useState)([]),s=(0,r.Z)(n,2),i=s[0],l=s[1],p=(0,u.useState)(1),f=(0,r.Z)(p,2),b=f[0],x=f[1],j=(0,u.useState)(0),S=(0,r.Z)(j,2),k=S[0],y=S[1],Z=(0,o.lr)(),w=(0,r.Z)(Z,2),M=w[0],N=w[1],P=null!==(e=M.get("query"))&&void 0!==e?e:"",C="3/search/movie?&include_adult=false&query=".concat(P,"&page=").concat(b);return(0,u.useEffect)((function(){""!==P.trim()&&h(C).then((function(e){var t=e.data,n=t.page,r=t.results,c=t.total_pages;l((function(e){return[].concat((0,a.Z)(e),(0,a.Z)(r))})),x(n),y(c)})).catch((function(e){console.log(e.message)}))}),[C,P,b]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("form",{className:d,onSubmit:function(e){e.preventDefault();var t=e.currentTarget.elements.input.value;if(l([]),!t)return N({});N({query:t})},children:[(0,v.jsx)("button",{className:m,type:"submit"}),(0,v.jsx)("input",{className:_,name:"input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies"})]}),(0,v.jsx)("ul",{children:i.length>0&&i.map((function(e){var n=e.original_title,a=e.id;return(0,v.jsx)("li",{children:(0,v.jsx)(o.rU,{to:"".concat(a),state:{from:t},children:(0,v.jsx)("span",{children:n})})},a)}))}),k>1&&b!==k&&(0,v.jsx)("button",{type:"button",onClick:function(){x((function(e){return e+1}))},className:g,children:"Load More"})]})}}}]);
//# sourceMappingURL=122.a7ad6c52.chunk.js.map